define("tagManager",["niceScroll","vm"],function(t,i,e){function s(t){var i={type:"post",dataType:"json",error:function(){alert("\u7f51\u7edc\u9519\u8bef\uff0c \u8bf7\u91cd\u8bd5\uff01")}},e=$.extend({},i,t);return $.ajax(e)}$.fn.heckScroll=function(){var t=$(this);return t.niceScroll({cursorcolor:"#686b71",autohidemode:!0,cursorwidth:7,cursorborderradius:"999px",cursorborder:0}),t};new Vue({el:"body",data:function(){return{curType:"",types:[],list:{},inited:!1,editShow:!1,editType:"1",curEdit:{id:"",tag_name:"",type:"",user_group:"",status:"",tag_short:"",tag_brief:"",tag_class:"",tag_posion:""}}},methods:{changeType:function(t){this.curType=t.type,this.curList||this.updateList()},del:function(t){confirm("\u662f\u5426\u5220\u9664\u6b64\u6761\uff1f")&&s({url:"/UserGroupTag/deleteUserGroupTag",data:{id:t.id}}).success(function(t){return 1e4!=t.status?alert(t.message):(alert("\u5220\u9664\u6210\u529f"),void this.updateList())}.bind(this))},add:function(){this.editType="0",this.curEdit.type=this.curType+"",this.editShow=!0},edit:function(t){this.editType="1",Object.assign(this.curEdit,t),this.editShow=!0},editHide:function(){this.editShow=!1,this.editClear()},init:function(){this.updateTypes().success(this.updateList)},updateTypes:function(){return s({url:"/UserGroupTag/getTypeList"}).success(function(t){return 1e4!=t.status?alert(t.message):(this.types=t.message,void(this.curType=this.types[0].type))}.bind(this))},updateList:function(){return s({url:"/UserGroupTag/getTagListByType",data:{type:this.curType}}).success(function(t){return 1e4!=t.status?alert(t.message):(Vue.set(this.list,this.curType,t.message),void(this.inited=!0))}.bind(this))},formatList:function(t){var i={};return t.map(function(t,e){var s=t.status,r=t.user_group;i[s]||(i[s]={}),i[s][r]||(i[s][r]=[]),i[s][r].push(t)}),i},editSubmit:function(){if(!this.cantEdit){var t=0==this.editType?"/UserGroupTag/addUserGroupTag":"/UserGroupTag/updateUserGroupTag";s({url:t,data:this.curEdit}).success(function(t){return 1e4!=t.status?alert(t.message):(alert("\u66f4\u65b0\u6210\u529f"),this.updateList(),void this.editHide())}.bind(this))}},editClear:function(){for(var t in this.curEdit)this.curEdit[t]=""}},created:function(){this.init(),$(".data_list_con").heckScroll()},computed:{curList:function(){return this.list[this.curType]},cantEdit:function(){var t=!1;for(var i in this.curEdit){var e=this.curEdit[i].trim();if(""==e)if(0==this.editType){if("tag_brief"!=i&&"id"!=i&&"tag_posion"!=i){t=!0;break}}else if(1==this.editType&&"tag_brief"!=i){t=!0;break}}return t}}})});