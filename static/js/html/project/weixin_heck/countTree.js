define("countTree",["vm","layui","niceScroll"],function(e,t,s){e("layui"),e("niceScroll");var a=function(e){var t={timeout:1e4,type:"post",dataType:"json",error:function(){alert("\u7f51\u7edc\u9519\u8bef\u8bf7\u91cd\u8bd5\uff01")}},s=$.extend({},t,e);$.ajax(s)};new Vue({el:"body",data:{apiUrl:{getUserGroupList:"/MassMessageLog/getUserGroupList",getTeamList:"/MassMessageLog/getTeamList",userList:"/MassMessageLog/getUserList",getMassMessageList:"/MassMessageLog/getMassMessageList"},requestData:{userGroupList:{},teamList:null,userList:[],messageList:[]},team:{selType:!1,noGroup:!1,message:!1},cut:{group:"",team:"",user:"",cut:!1},time:{start:"",end:""}},methods:{getData:function(e){return 1e4!=e.status?alert(e.message):void 0},getUserGroupList:function(){var e=this;a({url:e.apiUrl.getUserGroupList,success:function(t){e.getData(t),e.requestData.userGroupList=t.message||{},e.$nextTick(function(){$(".groups").niceScroll({cursorcolor:"#424242",cursoropacitymin:0,cursoropacitymax:.5})})}})},getTeamList:function(e){var t=this;t.cut.group=e,t.cut.team="",a({url:t.apiUrl.getTeamList,data:{user_group:e},success:function(e){t.getData(e),t.cut.user="",0!=e.message.length?(t.team.selType=!1,t.team.noGroup=!1,t.requestData.teamList=e.message,t.$nextTick(function(){$(".groupList").niceScroll({cursorcolor:"#424242",cursoropacitymin:0,cursoropacitymax:.5})})):(t.team.noGroup=!0,t.requestData.teamList=[])}})},getUserList:function(e){var t=this;a({url:t.apiUrl.userList,data:{team_group:e,user_group:t.cut.group},success:function(s){console.log(s.message),t.cut.team=e,t.requestData.userList=s.message}})},getMassMessageList:function(e){if(!this.cut.team)return alert("\u8bf7\u9009\u62e9\u7ec4\u522b\uff01");if(!e)return alert("\u8bf7\u9009\u62e9\u5b66\u5458\uff01");if(!this.time.start)return alert("\u8bf7\u9009\u62e9\u5f00\u59cb\u65f6\u95f4\uff01");if(!this.time.end)return alert("\u8bf7\u9009\u62e9\u7ed3\u675f\u65f6\u95f4\uff01");var t=this;t.cut.user=e,a({url:t.apiUrl.getMassMessageList,data:{admin_id:e,begin_date:startTime.value,end_date:endTime.value},success:function(e){t.requestData.messageList=[],e.message.constructor==Array&&0!=e.message.length?(t.team.message=!1,$.map(e.message,function(e,s){3e3==e.message_type?(e.content=JSON.parse(e.content),t.requestData.messageList.push(e)):t.requestData.messageList.push(e)})):t.team.message=!0,t.$nextTick(function(){$(".detail-list").niceScroll({cursorcolor:"#424242",cursoropacitymin:0,cursoropacitymax:.5,ailpadding:{top:10,right:-20,left:0,bottom:10}})})}})}},ready:function(){this.getUserGroupList();var e=new Date,t=e.getFullYear(),s=e.getMonth()+1>9?e.getMonth()+1:"0"+(e.getMonth()+1),a=e.getDate(),r=t+"-"+s+"-"+a;this.time.start=this.time.end=r}})});