define("articleManage",["upload","niceScroll"],function(e,t,a){var i=e("upload"),r="",n=$(".update_show");i.init({browse_button:"update_btn",container:"update_box",FileUploaded:function(e,t,a){var i=t.fileFullName;r=i,n.html('<img src="'+r+'" />')}}),e("niceScroll"),$.fn.heckScroll=function(){var e=$(this);return e.niceScroll({cursorcolor:"#686b71",autohidemode:!0,cursorwidth:7,cursorborderradius:"999px",cursorborder:0,horizrailenabled:!1}),e},function(){function e(e){if(1e4==e.status){var t=e.message.list,a="";if(0==t.length){var a="<h5>\u6682\u65e0\u6587\u7ae0</h5>";$(".article_list_detail").append(a)}for(var i=0;i<t.length;i++){var r=t[i].id,n=t[i].title,s=t[i].icon,l=t[i].link,c=t[i].introduction;t[i].add_time;a+='<li><div class="at_left">',a+="<p>"+n+"</p>",a+="<p>"+c+"</p>",a+='<p><a href="javascript:;" target="_blank">'+l+"</a></p>",a+='</div><div class="at_right">',a+='<img src="'+s+'">',a+='<div data-id="'+r+'">\u5220\u9664\u6587\u7ae0</div>',a+="</div></li>"}$(".article_list_detail").html(a),$(".article_list_detail").heckScroll()}e.status>1e4&&alert(e.message)}function t(){$.ajax({type:"POST",url:"/Article/articleList",data:{aid:1,gtype:1},dataType:"json",success:function(t){e(t)}})}function a(){$(".add_article_btn").on("click",function(){$("input").removeClass("err-bor"),$("textarea").removeClass("err-bor"),$("#update_btn").removeClass("err-bor"),$(".add-article-layer").fadeIn(380)})}function i(){$(".close-layer-btn-right").on("click",function(){$(".add-article-layer").fadeOut(380)})}function r(){$(".radio-sel input").click(function(){var e=$(this).attr("id");$("#"+e).attr("checked","checked"),$("#"+e).siblings("span").addClass("active"),$("#"+e).parents("p").siblings("p").children("span").removeClass("active").removeAttr("checked")})}function n(){$.ajax({type:"POST",url:"/Article/getClass",dataType:"json",success:function(e){if(e.status>1e4)return alert(e.message);if(1e4==e.status){var t="",a="",i=e.message.grouptype,r=e.message.arctype;for(var n in i){var s=" active";1!=n&&(s=""),t+='<li class="seltype'+s+'" data-bid="'+n+'">'+i[n]+"</li>"}$("#aid").append(t);for(var l in r){var s=" active";1!=l&&(s=""),a+='<li class="seltype'+s+'" data-aid="'+l+'">'+r[l]+"</li>"}$("#bid").append(a)}}})}function s(){$("body").on("click",".seltype",function(){$(this).addClass("active").siblings("li").removeClass("active");var t=$(".type-list .active").data("bid"),a=$(".type-sel .active").data("aid");$.ajax({type:"POST",url:"/Article/articleList",data:{aid:a,gtype:t},dataType:"json",success:function(t){e(t)}})})}function l(){$("#addArticleBtn").on("click",function(){var e=$("#gtype input:radio:checked").val(),t=$("#types input:radio:checked").val(),a=$("input[name='title']").val(),i=$("textarea[name='content']").val(),r=$("input[name='link']").val(),n=$(".update_show").find("img").attr("src");if(!e)return alert("\u8bf7\u9009\u62e9\u8eab\u4efd\u5206\u7c7b\uff01");if(!t)return alert("\u8bf7\u9009\u62e9\u6587\u7ae0\u5206\u7c7b\uff01");r?r.indexOf("http")>-1?$("input[name='link']").removeClass("err-bor"):alert("\u60a8\u586b\u5199\u7684\u5fc5\u987b\u662f\u5408\u6cd5\u7684\u94fe\u63a5"):$("input[name='link']").addClass("err-bor"),i?$("textarea[name='content']").removeClass("err-bor"):$("textarea[name='content']").addClass("err-bor"),a?$("input[name='title']").removeClass("err-bor"):$("input[name='title']").addClass("err-bor"),n?$("#update_btn").removeClass("err-bor"):$("#update_btn").addClass("err-bor"),$("input[name='title']").focus(function(){$(this).removeClass("err-bor")}),$("textarea[name='content']").focus(function(){$(this).removeClass("err-bor")}),$("input[name='link']").focus(function(){$(this).removeClass("err-bor")}),$("#update_btn").click(function(){$(this).removeClass("err-bor")});var s=$(".err-bor").length;s||$.ajax({type:"POST",url:"/Article/Add",data:{gtype:e.substr(e.length-1,1),aid:t.substr(t.length-1,1),title:a,introduction:i,link:r,icon:n},dataType:"json",success:function(e){1e4==e.status&&(alert(e.message),$(".add-article-layer").fadeOut(380),location.reload()),e.status>1e4&&alert(e.message)}})})}function c(){$("body").on("click",".at_right div",function(){var e=$(this).data("id");window.confirm("\u786e\u8ba4\u5220\u9664\u6587\u7ae0\uff1f")&&$.ajax({type:"POST",url:"/Article/Del",data:{id:e},dataType:"json",success:function(e){1e4==e.status&&location.reload(),e.status>1e4&&alert(e.message)}})})}var o=window.innerHeight-240;$(".article_list_detail").attr("style","height:"+o+"px"),t(),n(),s(),r(),a(),i(),l(),c()}()});