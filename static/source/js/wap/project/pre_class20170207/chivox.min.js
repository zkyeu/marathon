var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},Pepper;(function(n){var f=function(){function n(){this.version="0.7.8";this._utils=new i;this._wx=new r;"undefined"==typeof $&&i.getScript("http://cdn.bootcss.com/zepto/1.1.6/zepto.min.js");"undefined"==typeof store&&i.getScript("http://cdn.bootcss.com/store.js/1.3.20/store.min.js");"undefined"==typeof wx&&i.getScript("https://res.wx.qq.com/open/js/jweixin-1.0.0.js")}return Object.defineProperty(n.prototype,"utils",{get:function(){return this._utils},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"wx",{get:function(){return this._wx},enumerable:!0,configurable:!0}),n}(),i,r,u,t;n.Chivox=f;i=function(){function t(){}return t.prototype.generateGuid=function(){return t.generateGuid()},t.prototype.generateTimestamp=function(){return t.generateTimestamp()},t.prototype.regularBuilder=function(n){return t.regularBuilder(n)},t.prototype.getQueryString=function(n){return t.getQueryString(n)},t.getScript=function(n){var i=document.getElementsByTagName("head").item(0),t=document.createElement("script");t.type="text/javascript";t.src=n;i.appendChild(t)},t.getQueryString=function(n){var i=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(i);return t!=null?t[2]:null},t.generateGuid=function(){var n,t;return typeof crypto!="undefined"&&typeof window.crypto.getRandomValues!="undefined"?(n=new Uint16Array(8),window.crypto.getRandomValues(n),t=function(n){for(var t=n.toString(16);t.length<4;)t="0"+t;return t},t(n[0])+t(n[1])+"-"+t(n[2])+"-"+t(n[3])+"-"+t(n[4])+"-"+t(n[5])+t(n[6])+t(n[7])):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})},t.generateTimestamp=function(){return parseInt(((new Date).getTime()/1e3).toString())},t.prototype.generateSignature=function(){for(var e,o,s,u,i,f=[],r=0;r<arguments.length;r++)f[r]=arguments[r];e=t.generateTimestamp();f.push(e.toString());var c=f.sort(),l=c.join(""),h=new n.Crypt.SHA1;for(h.update(l),o=h.digest(),s="",u=0;u<o.length;u++)i=o[u].toString(16),i=i.length!==2?"0"+i:i,s+=i;return s+e.toString()},t.regularBuilder=function(n){return n=this.replaceSBC(n),n=this.replaceInvalidCharacter(n),this.replaceMiscellaneous(n)},t.replaceSBC=function(n){return n.replace(/Ａ/g,"A").replace(/Ｂ/g,"B").replace(/Ｃ/g,"C").replace(/Ｄ/g,"D").replace(/Ｅ/g,"E").replace(/Ｆ/g,"F").replace(/Ｇ/g,"G").replace(/Ｈ/g,"H").replace(/Ｉ/g,"I").replace(/Ｊ/g,"J").replace(/Ｋ/g,"K").replace(/Ｌ/g,"L").replace(/Ｍ/g,"M").replace(/Ｎ/g,"N").replace(/Ｏ/g,"O").replace(/Ｐ/g,"p").replace(/Ｑ/g,"Q").replace(/Ｒ/g,"R").replace(/Ｓ/g,"S").replace(/Ｔ/g,"T").replace(/Ｕ/g,"U").replace(/Ｖ/g,"V").replace(/Ｗ/g,"W").replace(/Ｘ/g,"X").replace(/Ｙ/g,"Y").replace(/Ｚ/g,"Z").replace(/ａ/g,"a").replace(/ｂ/g,"b").replace(/ｃ/g,"c").replace(/ｄ/g,"d").replace(/ｅ/g,"e").replace(/ｆ/g,"f").replace(/ｇ/g,"g").replace(/ｈ/g,"h").replace(/ｉ/g,"i").replace(/ｊ/g,"j").replace(/ｋ/g,"k").replace(/ｌ/g,"l").replace(/ｍ/g,"m").replace(/ｎ/g,"n").replace(/ｏ/g,"o").replace(/ｐ/g,"p").replace(/ｑ/g,"q").replace(/ｒ/g,"r").replace(/ｓ/g,"s").replace(/ｔ/g,"t").replace(/ｕ/g,"u").replace(/ｖ/g,"v").replace(/ｗ/g,"w").replace(/ｘ/g,"x").replace(/ｙ/g,"y").replace(/ｚ/g,"z").replace(/１/g,"1").replace(/２/g,"2").replace(/３/g,"3").replace(/４/g,"4").replace(/５/g,"5").replace(/６/g,"6").replace(/７/g,"7").replace(/８/g,"8").replace(/９/g,"9").replace(/０/g,"0").replace(/，/g,",").replace(/。/g,".").replace(/‘/g,"'").replace(/’/g,"'").replace(/“/g,'"').replace(/”/g,'"').replace(/！/g,"!").replace(/？/g,"?").replace(/—/g,"-").replace(/－/g,"-").replace(/；/g,";").replace(/：/g,":").replace(/、/g,",").replace(/﹩/g,"$").replace(/…/g,"...").replace(/／/g,"/").replace(/\\r/g," ").replace(/\\n/g," ")},t.replaceInvalidCharacter=function(n){return n.replace(/[^a-zA-Z\d,\.'";:!\?\-\$\/]+/g," ").replace(/^[^a-zA-Z\d"]+/g,"")},t.replacePunctuationTrim=function(n){return n.replace(/\s+[,\.'";:!\?\-\$\/]\s+/g,function(n){return n.replace(/\s/g,"")})},t.replaceRepeatPunctuation=function(n){return n=this.replacePunctuationTrim(n),n.replace(/,[,\.';:!\?\/]+/g,",").replace(/\.[,\.';:!\?\/]+/g,".").replace(/'[,\.';:!\?\/]+/g,"'").replace(/"[,\.'";:!\?\/]+/g,'"').replace(/;[,\.';:!\?\/]+/g,";").replace(/:[,\.';:!\?\/]+/g,":").replace(/![,\.';:!\?\/]+/g,"!").replace(/\?[,\.';:!\?\/]+/g,"?").replace(/\-[,\.'";:!\?\-\$\/]+/g,"-").replace(/\$[,\.'";:!\?\-\$\/]+/g,"$").replace(/\/[,\.'";:!\?\-\$\/]+/g,"/")},t.replaceNumberSpace=function(n){return n=this.replaceRepeatPunctuation(n),n.replace(/\-\D+/g,function(n){return n.replace(/\-/g," ")}).replace(/\$\D+/g,function(n){return n.replace(/\$/g," ")}).replace(/\/\D+/g,function(n){return n.replace(/\//g," ")}).replace(/(\-?)(\d{1,3})(,\d{3})+(\.\d+)?/g,function(n){return n.replace(/,/g,"")}).replace(/(\-?)(\d+)?(:(\-?)(\d+)?)+|(\d{1,4})(\-\d{1,2})(\-\d{1,4})|(\d{1,4})(\/\d{1,2})(\/\d{1,4})|(\d{1,4})(\.\d{1,2})(\.\d{1,4})|(\-?)(\$?)(\d+)(\.\d+)?/g," $&")},t.replaceMiscellaneous=function(n){return n=this.replaceNumberSpace(n),n=this.replacePunctuationTrim(n),n.replace(/\.(?=[a-zA-Z])|\.$/g,". ").replace(/\s*[\.]{3,}/g,"!!!").replace(/\s*[\.]{2}/g,". ").replace(/\s*[!]{3,}/g,"... ").replace(/,(?=[a-zA-Z])\d|,$/g,", ").replace(/\s*[,]{1,2}/g,", ").replace(/:(?=[a-zA-Z])|:$/g,": ").replace(/\s*[:]{2}/g,": ").replace(/!(?=[a-zA-Z]\d)|!$/g,"! ").replace(/\s*[!]{1,2}/g,"! ").replace(/;(?=[a-zA-Z]\d)|;$/g,"; ").replace(/\s*[;]{1,2}/g,"; ").replace(/\?(?=[a-zA-Z]\d)|\?$/g,"? ").replace(/\s*[\?]{1,2}/g,"? ").replace(/\"(.*?)\"/g," $& ").replace(/\s+/g," ").replace(/[\.,:!;?]\s+\"/g,function(n){return n.replace(" ","")}).replace(/^\s+|\s+$/g,"")},t.detect=function(){var t=navigator.userAgent,u=t.match(/(Android);?[\s\/]+([\d.]+)?/),r=t.match(/(iPad).*OS\s([\d_]+)/),i=t.match(/(iPod)(.*OS\s([\d_]+))?/),f=!r&&t.match(/(iPhone\sOS)\s([\d_]+)/),n={version:"",android:!1,ios:!1,iphone:!1,ipad:!1,ipod:!1};return u&&(n.android=!0,n.version=u[2]),f&&!i&&(n.ios=n.iphone=!0,n.version=f[2].replace(/_/g,".")),r&&(n.ios=n.ipad=!0,n.version=r[2].replace(/_/g,".")),i&&(n.ios=n.ipod=!0,n.version=i[3]?i[3].replace(/_/g,"."):null),n},Object.defineProperty(t.prototype,"title",{set:function(n){var i=$("body"),t;document.title=n;t=$('<iframe src="favicon.ico" style="display: none; width: 1px; height: 1px;"><\/iframe>').on("load",function(){return setTimeout(function(){t.off("load").remove()},0),!0}).appendTo(i)},enumerable:!0,configurable:!0}),t}();n.Utils=i;r=function(){function r(){this._ajaxTimeout=25e3;this._host="https://api.weixin.chivoxapp.com";this._isReady=!1;this._infoModels=new n.Collections.Dictionary([]);this._audio=new Audio;this._audio.id="aitips";this._audio.src=this._host+"/js/tips.mp3";this._audio.load()}return Object.defineProperty(r.prototype,"apiUri",{get:function(){return this._host+"/"+this._appKey+"/"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"userInfo",{get:function(){return this._userInfo},enumerable:!0,configurable:!0}),r.prototype.raiseEvent=function(n,t){t!=null&&typeof t=="function"&&(n.timestamp=i.generateTimestamp(),console.log(n),t(n))},r.prototype.post=function(n){var t=this;$.ajax({url:this.apiUri+n.url,type:"POST",timeout:this._ajaxTimeout,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(n.postData),success:function(t){n.success(t)},error:function(i){var r="invoke "+n.url+" api fail.";i.status===0?t.raiseEvent({result:{errId:32001,error:r+" ajax timeout."}},n.error):i.status===401||i.status===500?t.raiseEvent({result:{errId:32002,error:i.responseText}},n.error):i.status===404?t.raiseEvent({result:{errId:32003,error:r+" not found api."}},n.error):t.raiseEvent({result:{errId:32004,error:r}},n.error)}})},r.prototype.getResult=function(n){if(typeof n!="string")throw Error("invalid clientRecId");return this._infoModels.get(n)},r.prototype.config=function(n){try{if(typeof n.appKey!="string")throw Error("invalid parameter appKey.");if(typeof n.signature!="string")throw Error("invalid parameter signature.");if(!Array.isArray(n.jsApiList))throw Error("invalid parameter jsApiList.");}catch(t){this.raiseEvent({result:{errId:32005,error:t.message}},n.error);return}typeof n.timeout=="number"&&n.timeout>this._ajaxTimeout&&(this._ajaxTimeout=n.timeout);this._appKey=n.appKey;this._signature=n.signature+n.appKey;typeof n.oauth=="boolean"&&n.oauth?(store.enabled&&(this._userInfo=store.get("wx"+this._appKey)),"undefined"==typeof this._userInfo?this.getUserInfo(n):this.refreshUserInfo(n)):this.initializeWeiXinApiAndCheckResult(n)},r.prototype.getUserInfo=function(n){var t=this,r=i.getQueryString("code"),u,f;r==null?(u={url:"oauth/getauthorizeurl",postData:{signature:this._signature},success:function(i){i.errId===0?window.location.href=i.authorizeUrl:t.raiseEvent({result:{errId:i.errId,error:i.error}},n.error)},error:n.error},this.post(u)):(f={url:"oauth/getuserinfo",postData:{signature:this._signature,code:r},success:function(i){i.errId===0?(t._userInfo=i.userInfo,store.set("wx"+t._appKey,t._userInfo),t.raiseEvent({result:i.userInfo},n.authorize),t.initializeWeiXinApiAndCheckResult(n)):t.raiseEvent({result:{errId:i.errId,error:i.error}},n.error)},error:n.error},this.post(f))},r.prototype.refreshUserInfo=function(n){var t=this,i={url:"oauth/refreshuserinfo",postData:{signature:this._signature,refreshToken:this._userInfo.refreshToken},success:function(i){i.errId===0?(t._userInfo=i.userInfo,store.set("wx"+t._appKey,t._userInfo),t.raiseEvent({result:i.userInfo},n.authorize),t.initializeWeiXinApiAndCheckResult(n)):i.errId===40029||i.errId===40030||i.errId===42002||i.errId===42007?(store.remove("wx"+t._appKey),t.getUserInfo(n)):t.raiseEvent({result:{errId:i.errId,error:i.error}},n.error)},error:n.error};this.post(i)},r.prototype.initializeWeiXinApiAndCheckResult=function(n){var t=this,i={url:"api/createsignature",postData:{signature:this._signature,nonceStr:n.nonceStr,jsApiList:n.jsApiList},success:function(i){i.errId===0?(t.ensureApiListIntegrity(i.ticket.jsApiList),i.ticket.debug=typeof n.debug=="undefined"?!1:n.debug,wx.config(i.ticket),wx.error(function(i){t.raiseEvent({result:{errId:32021,error:i.errMsg}},n.error);throw Error(i.errMsg);}),wx.ready(function(){wx.checkJsApi({jsApiList:i.ticket.jsApiList,success:function(i){i.errMsg==="checkJsApi:ok"?(t._checkResult=i.checkResult,i.checkResult.startRecord&&i.checkResult.stopRecord&&i.checkResult.playVoice&&i.checkResult.stopVoice&&i.checkResult.uploadVoice&&i.checkResult.getNetworkType?(t._isReady=!0,t.initializeDevice(n)):t.raiseEvent({result:{errId:32022,error:"key api unauthorized."}},n.error)):t.raiseEvent({result:{errId:32022,error:"api unauthorized."}},n.error)}})})):t.raiseEvent({result:{errId:i.errId,error:i.error}},n.error)},error:n.error};this.post(i)},r.prototype.ensureApiListIntegrity=function(n){var t=["startRecord","stopRecord","playVoice","stopVoice","uploadVoice","getNetworkType"],i,r;if(Array.isArray(n))for(i in t)t.hasOwnProperty(i)&&(r=t[i],$.inArray(r,n)===-1&&n.push(r));else n=t},r.prototype.initializeDevice=function(n){var t=this;n.skipDeviceDetect?this.raiseEvent({result:this._checkResult},n.success):wx.startRecord({success:function(){setTimeout(function(){wx.stopRecord({success:function(r){t.raiseEvent({result:t._checkResult},n.success);i.detect().ios&&(wx.playVoice({localId:r.localId}),wx.stopVoice({localId:r.localId}))},fail:function(){t.raiseEvent({result:{errId:32023,error:"device init fail."}},n.error)}})},1200)},fail:function(i){t.raiseEvent({result:{errId:32023,error:i.errMsg}},n.error)},cancel:function(i){t.raiseEvent({result:{errId:32007,error:i.errMsg}},n.error)}})},r.prototype.startRecord=function(n){if(this._isReady){var t;try{if(typeof n.refText!="string")throw Error("invalid parameter refText.");if(typeof n.coreType!="string")throw Error("invalid parameter coreType.");if(typeof n.regular!="boolean")throw Error("invalid parameter regular.");if(typeof n.rank!="number")throw Error("invalid parameter rank.");t=new u(n.regular);t.coreType=n.coreType;t.rank=n.rank;t.refText=n.refText;this._infoModels.add(t.clientRecId,t)}catch(i){this.raiseEvent({result:{errId:32005,error:i.message}},n.error);return}n.isPlayTipsAudio?this.playTipsAudioAfterRecord(t,n):this.internalStartRecord(t,n)}else this.raiseEvent({result:{errId:32006,error:"must config first."}},n.error)},r.prototype.playTipsAudioAfterRecord=function(n,t){var i=this;this.invoke(function(){var r=function(){typeof n!="undefined"&&typeof t!="undefined"&&i.internalStartRecord(n,t);i._audio.removeEventListener("ended",r)};i._audio.addEventListener("ended",r);i._audio.currentTime=0;i._audio.play()})},r.prototype.internalStartRecord=function(n,i){var r=this;typeof n!="undefined"&&typeof i!="undefined"&&wx.ready(function(){wx.startRecord({success:function(u){n.startTime=(new Date).getTime();u.errMsg==="startRecord:ok"?(n.status=t.Started,r.raiseEvent({result:{clientRecId:n.clientRecId}},i.success)):(n.status=t.Failed,r.raiseEvent({result:{errId:32031,error:"invoke wx startRecord fail."}},i.error))},fail:function(u){n.status=t.Failed;r.raiseEvent({result:{errId:32031,error:u.errMsg}},i.error)},cancel:function(u){n.status=t.Cancelled;r.raiseEvent({result:{errId:32007,error:u.errMsg}},i.error)}})})},r.prototype.stopRecord=function(n){if(this._isReady){var i;try{if(typeof n.clientRecId!="string")throw Error("invalid parameter clientRecId.");if(i=this._infoModels.get(n.clientRecId),typeof i=="undefined"||i===null)throw Error("invalid parameter clientRecId.");}catch(r){this.raiseEvent({result:{errId:32005,error:r.message}},n.error);return}i.status===t.Started?this.internalStopRecord(i,n):this.raiseEvent({result:{errId:32032,error:"must start record first."}},n.error)}else this.raiseEvent({result:{errId:32006,error:"must config first."}},n.error)},r.prototype.internalStopRecord=function(n,r){var u=this;wx.ready(function(){wx.stopRecord({success:function(f){n.endTime=(new Date).getTime();n.localId=f.localId;n.coreType==="en.word.score"&&n.duration>19e3||n.coreType==="en.sent.score"&&n.duration>39e3||n.coreType==="en.pred.exam"&&n.duration>119e3?(n.status=t.Failed,u.raiseEvent({result:{errId:32035,error:"the duration of the audio is over the limit."}},r.error)):f.errMsg==="stopRecord:ok"?(n.status=t.Stoped,u.raiseEvent({result:{localId:n.localId}},r.stoped),i.detect().ios&&(wx.playVoice({localId:n.localId}),wx.stopVoice({localId:n.localId})),u.internalUploadVoice(n,r)):(n.status=t.Failed,u.raiseEvent({result:{errId:32036,error:"invoke wx stopRecord fail."}},r.error))},fail:function(i){n.status=t.Failed;u.raiseEvent({result:{errId:32036,error:i.errMsg}},r.error)}})})},r.prototype.internalUploadVoice=function(n,i){var r=this;n.tryUpload();wx.uploadVoice({localId:n.localId,isShowProgressTips:i.isShowProgressTips,success:function(u){if(u.errMsg==="uploadVoice:ok"){n.status=t.Upload;n.serverId=u.serverId;r.raiseEvent({result:{serverId:u.serverId}},i.upload);var f=typeof r._userInfo!="undefined"?r._userInfo.openid:null,e={url:"api/weixinevaluate",postData:{signature:r._signature,coreType:n.coreType,rank:n.rank,refText:n.refText,mediaId:n.serverId,clientRecId:n.clientRecId,openid:f},success:function(u){u.errId===0?(n.status=t.Completed,n.evaluateResult=u.result,n.audioUrl="http://"+u.result.audioUrl+".mp3",r.raiseEvent({result:u.result},i.success)):(n.status=t.Failed,r.raiseEvent({result:{errId:u.errId,error:u.error}},i.error))},error:i.error};r.post(e)}else n.status=t.Failed,r.raiseEvent({result:{errId:32038,error:"invoke wx uploadVoice fail."}},i.error)},fail:function(u){n.uploadCount<10?r.internalUploadVoice(n,i):(n.status=t.Failed,r.raiseEvent({result:{errId:32038,error:u.errMsg}},i.error))}})},r.prototype.playVoice=function(n){var i=this;this._isReady?wx.ready(function(){var r;try{if(typeof n.clientRecId!="string")throw Error("invalid parameter clientRecId.");if(r=i._infoModels.get(n.clientRecId),typeof r=="undefined"||r===null)throw Error("invalid parameter clientRecId.");}catch(u){i.raiseEvent({result:{errId:32005,error:u.message}},n.error);return}r.status===t.Stoped||t.Upload||t.Completed?wx.playVoice({localId:r.localId,fail:function(t){i.raiseEvent({result:{errId:32042,error:t.errMsg}},n.error)}}):i.raiseEvent({result:{errId:32041,error:"invalid evaluate status."}},n.error)}):this.raiseEvent({result:{errId:32006,error:"must config first."}},n.error)},r.prototype.stopVoice=function(n){var i=this;this._isReady?wx.ready(function(){var r;try{if(typeof n.clientRecId!="string")throw Error("invalid parameter clientRecId.");if(r=i._infoModels.get(n.clientRecId),typeof r=="undefined"||r===null)throw Error("invalid parameter clientRecId.");}catch(u){i.raiseEvent({result:{errId:32005,error:u.message}},n.error);return}r.status===t.Stoped||t.Upload||t.Completed?wx.stopVoice({localId:r.localId,fail:function(t){i.raiseEvent({result:{errId:32043,error:t.errMsg}},n.error)}}):i.raiseEvent({result:{errId:32041,error:"invalid evaluate status."}},n.error)}):this.raiseEvent({result:{errId:32006,error:"must config first."}},n.error)},r.prototype.invoke=function(n){typeof n=="function"&&wx.ready(function(){wx.getNetworkType({success:function(){n()}})})},r.prototype.shareAllInOne=function(n){var t=this;this._isReady?wx.ready(function(){if(t._checkResult.onMenuShareAppMessage)wx.onMenuShareAppMessage({title:n.title,desc:n.desc,link:n.link,imgUrl:n.imgUrl,success:function(){t.raiseEvent({result:{message:"onMenuShareAppMessage success."}},n.success)},cancel:function(){t.raiseEvent({result:{errId:32051,error:"onMenuShareAppMessage cancel."}},n.cancel)}});if(t._checkResult.onMenuShareTimeline)wx.onMenuShareTimeline({title:n.title,desc:n.desc,link:n.link,imgUrl:n.imgUrl,success:function(){t.raiseEvent({result:{message:"onMenuShareTimeline success."}},n.success)},cancel:function(){t.raiseEvent({result:{errId:32052,error:"onMenuShareTimeline cancel."}},n.cancel)}});if(t._checkResult.onMenuShareQQ)wx.onMenuShareQQ({title:n.title,desc:n.desc,link:n.link,imgUrl:n.imgUrl,success:function(){t.raiseEvent({result:{message:"onMenuShareQQ success."}},n.success)},cancel:function(){t.raiseEvent({result:{errId:32053,error:"onMenuShareQQ cancel."}},n.cancel)}});if(t._checkResult.onMenuShareQZone)wx.onMenuShareQZone({title:n.title,desc:n.desc,link:n.link,imgUrl:n.imgUrl,success:function(){t.raiseEvent({result:{message:"onMenuShareQZone success."}},n.success)},cancel:function(){t.raiseEvent({result:{errId:32054,error:"onMenuShareQZone cancel."}},n.cancel)}});if(t._checkResult.onMenuShareWeibo)wx.onMenuShareWeibo({title:n.title,desc:n.desc,link:n.link,imgUrl:n.imgUrl,success:function(){t.raiseEvent({result:{message:"onMenuShareWeibo success."}},n.success)},cancel:function(){t.raiseEvent({result:{errId:32055,error:"onMenuShareWeibo cancel."}},n.cancel)}})}):this.raiseEvent({result:{errId:32006,error:"must config first."}},n.error)},r}();n.Sdk=r;u=function(){function n(n){this._supportedCoreTypes=["en.word.score","en.sent.score","en.pred.exam"];this._clientRecId=i.generateGuid();this._regular=n;this._uploadCount=0}return Object.defineProperty(n.prototype,"coreType",{get:function(){return this._coreType},set:function(n){if(typeof n=="string"&&$.inArray(n,this._supportedCoreTypes)!==-1)this._coreType=n;else throw Error("unsupported coreType.");},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"refText",{get:function(){return this._refText},set:function(n){this._refText=this._regular?i.regularBuilder(n):n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"clientRecId",{get:function(){return this._clientRecId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return this.endTime-this.startTime},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"standard",{get:function(){return 2e3+this._refText.split(" ").length*800},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"uploadCount",{get:function(){return this._uploadCount},enumerable:!0,configurable:!0}),n.prototype.tryUpload=function(){this._uploadCount++},n}();n.EvaluateInfoModel=u,function(n){n[n.Started=0]="Started";n[n.Stoped=1]="Stoped";n[n.Upload=2]="Upload";n[n.Completed=3]="Completed";n[n.Cancelled=4]="Cancelled";n[n.Failed=5]="Failed"}(t=n.EvaluateStatus||(n.EvaluateStatus={}))})(Pepper||(Pepper={})),function(n){var t;(function(n){var t=function(){function n(){this.blockSize=-1}return n.prototype.reset=function(){throw Error("unimplemented abstract method");},n.prototype.update=function(){throw Error("unimplemented abstract method");},n.prototype.digest=function(){throw Error("unimplemented abstract method");},n}(),i=function(n){function t(){var t=n.call(this)||this,i;for(t._chain=[],t._buf=[],t._W=[],t._pad=[],t._inbuf=0,t._total=0,t.blockSize=64,t._pad[0]=128,i=1;i<t.blockSize;++i)t._pad[i]=0;return t.reset(),t}return __extends(t,n),t.prototype.reset=function(){this._chain[0]=1732584193;this._chain[1]=4023233417;this._chain[2]=2562383102;this._chain[3]=271733878;this._chain[4]=3285377520;this._inbuf=0;this._total=0},t.prototype.compress=function(n,t){var r,i,o;if(t||(t=0),r=this._W,typeof n=="string")for(i=0;i<16;i++)r[i]=n.charCodeAt(t)<<24|n.charCodeAt(t+1)<<16|n.charCodeAt(t+2)<<8|n.charCodeAt(t+3),t+=4;else for(i=0;i<16;i++)r[i]=n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3],t+=4;for(i=16;i<80;i++)o=r[i-3]^r[i-8]^r[i-14]^r[i-16],r[i]=(o<<1|o>>>31)&4294967295;var s=this._chain[0],u=this._chain[1],f=this._chain[2],e=this._chain[3],l=this._chain[4],h,c;for(i=0;i<80;i++)i<40?i<20?(h=e^u&(f^e),c=1518500249):(h=u^f^e,c=1859775393):i<60?(h=u&f|e&(u|f),c=2400959708):(h=u^f^e,c=3395469782),o=(s<<5|s>>>27)+h+l+c+r[i]&4294967295,l=e,e=f,f=(u<<30|u>>>2)&4294967295,u=s,s=o;this._chain[0]=this._chain[0]+s&4294967295;this._chain[1]=this._chain[1]+u&4294967295;this._chain[2]=this._chain[2]+f&4294967295;this._chain[3]=this._chain[3]+e&4294967295;this._chain[4]=this._chain[4]+l&4294967295},t.prototype.update=function(n,t){if(n!=null){t===void 0&&(t=n.length);for(var f=t-this.blockSize,i=0,u=this._buf,r=this._inbuf;i<t;){if(r===0)while(i<=f)this.compress(n,i),i+=this.blockSize;if(typeof n=="string"){while(i<t)if(u[r]=n.charCodeAt(i),++r,++i,r===this.blockSize){this.compress(u);r=0;break}}else while(i<t)if(u[r]=n[i],++r,++i,r===this.blockSize){this.compress(u);r=0;break}}this._inbuf=r;this._total+=t}},t.prototype.digest=function(){var r=[],u=this._total*8,n,i,t;for(this._inbuf<56?this.update(this._pad,56-this._inbuf):this.update(this._pad,this.blockSize-(this._inbuf-56)),n=this.blockSize-1;n>=56;n--)this._buf[n]=u&255,u/=256;for(this.compress(this._buf),i=0,n=0;n<5;n++)for(t=24;t>=0;t-=8)r[i]=this._chain[n]>>t&255,++i;return r},t}(t);n.SHA1=i})(t=n.Crypt||(n.Crypt={}))}(Pepper||(Pepper={})),function(n){var t;(function(n){var t=function(){function n(n){this._keys=[];this._values=[];for(var t=0;t<n.length;t++)this[n[t].key.toString()]=n[t].value,this._keys.push(n[t].key),this._values.push(n[t].value)}return n.prototype.add=function(n,t){this.containsKey(n)||(this[n.toString()]=t,this._keys.push(n),this._values.push(t))},n.prototype.remove=function(n){if(this.containsKey(n)){var t=this._keys.indexOf(n,0);this._keys.splice(t,1);this._values.splice(t,1);delete this[n.toString()]}},n.prototype.get=function(n){return this[n.toString()]},Object.defineProperty(n.prototype,"keys",{get:function(){return this._keys},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),n.prototype.containsKey=function(n){return typeof this[n.toString()]=="undefined"?!1:!0},n.prototype.toLookup=function(){return this},n}();n.Dictionary=t})(t=n.Collections||(n.Collections={}))}(Pepper||(Pepper={})),function(){chivox=new Pepper.Chivox}();